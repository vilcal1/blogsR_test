<ui:composition template="../templates/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <!--    se puede usar para agregar estilos propios o codigo javascript-->
    <ui:define name="head">

    </ui:define>

    <ui:define name="content">

        <h:form>
            <div class="ui-fluid formgrid grid">
                <div class="field col-12 md:col-4">
                    <p:outputLabel for="@next" value="Lectores"/>
                    <p:selectOneMenu id="somLectores" value="#{lectorBlogController.readerId}">
                        <f:selectItem itemLabel="Select One" itemValue=""/>
                        <f:selectItems value="#{lectorBlogController.listaReaders}"
                                       var="lector"
                                       itemLabel="#{lector.readersName}"
                                       itemValue="#{lector.readersId}"/>
                        <p:ajax event="change" update="datos"
                                process="@this" listener="#{lectorBlogController.lectorSeleccionado()}"/>
                    </p:selectOneMenu>
                </div>
                <div class="field col-12 md:col-4">
                    <p:outputLabel for="@next" value="Blogs"/>
                    <p:selectOneMenu id="somBlogs" value="#{lectorBlogController.blogId}">
                        <f:selectItem itemLabel="Select One" itemValue=""/>
                        <f:selectItems value="#{lectorBlogController.listaBlogs}"
                                       var="blog"
                                       itemLabel="#{blog.title}"
                                       itemValue="#{blog.id}"/>
                        <p:ajax event="change" update="datos"
                                process="@this" listener="#{lectorBlogController.blogSeleccionado()}" />
                    </p:selectOneMenu>
                </div>
                <div class="field col-12 md:4">
                    <p:commandButton value="Agregar"
                                     actionListener="#{lectorBlogController.asignarBlogAlector()}"
                                     update="@form"
                                     process="@form"/>
                </div>
            </div>

            <!-- Table to display list of lectores -->
            <p:dataTable id="datos" value="#{lectorBlogController.reader.blogs}" var="p">
                <f:facet name="header">
                    Listado de blogs para el lector #{lectorBlogController.reader.readersName}
                </f:facet>
                <p:column headerText="Codigo de Blog">
                    <h:outputText value="#{p.id}"/>
                </p:column>
                <p:column headerText="Titulo de Blog">
                    <h:outputText value="#{p.title}"/>
                </p:column>
                <p:column headerText="Descripcion de Blog">
                    <h:outputText value="#{p.description}"/>
                </p:column>
            </p:dataTable>
        </h:form>

    </ui:define>
</ui:composition>
